(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{5932:function(e,t,r){Promise.resolve().then(r.bind(r,2473))},2473:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(7437),a=r(3890),s=r(2265);let i=e=>{let t=JSON.parse(localStorage.getItem("chapterHistory")||"[]");t.some(t=>t.id===e.id)||(t.length>=5&&t.pop(),t.unshift({id:e.id,story:e.story,title:e.title,accessedAt:new Date().toISOString()}),localStorage.setItem("chapterHistory",JSON.stringify(t)))};var l=r(8937),o=r(4033),c=r(8641),u=r(6596);function d(){let[e]=(0,a.KO)(u.U0),[t]=(0,a.KO)(u.T9),{data:r}=(0,l.Iz)(t),s=(0,o.useRouter)();if(r)return(0,n.jsxs)(c.Ph,{value:e,onValueChange:e=>{s.push("/stories/".concat(t,"/chapters/").concat(e))},children:[(0,n.jsx)(c.i4,{className:"w-[300px]",children:(0,n.jsx)(c.ki,{placeholder:e})}),(0,n.jsx)(c.Bw,{children:(0,n.jsx)(c.DI,{children:r.map(e=>(0,n.jsx)(c.Ql,{value:e.id.toString(),children:e.title},e.id))})})]})}var f=r(575);function h(){return(0,n.jsxs)("div",{className:"my-3 flex justify-center gap-2",children:[(0,n.jsx)(f.z,{className:"w-[200px]",children:"Chương Trước"}),(0,n.jsx)(d,{}),(0,n.jsx)(f.z,{className:"w-[200px]",children:"Chương Sau"})]})}var p=r(2274),m=r(6456);function x(e){let{params:t}=e,{data:r}=(0,l.Sl)(t.chapterId),{data:o}=(0,l.IQ)(t.storySlug),[,c]=(0,a.KO)(u.U0),[,d]=(0,a.KO)(u.T9);if((0,s.useEffect)(()=>{r&&i(r)},[r]),(0,s.useEffect)(()=>{c(t.chapterId),d(t.storySlug)},[]),!r)return(0,n.jsx)("div",{children:"Chapter loading..."});if(!o)return(0,n.jsx)("div",{children:"Story loading..."});let f=[{title:"Home",href:"/"},{title:"".concat(o.title),href:"/stories/".concat(o.slug)},{title:"".concat(r.title),href:"/stories/".concat(o.slug,"/chapters/").concat(r.id)}];return(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)(p.a,{paths:f}),(0,n.jsxs)("div",{className:"container flex flex-col",children:[(0,n.jsx)(m.H2,{className:"text-center",children:r.title}),(0,n.jsx)(h,{}),(0,n.jsx)("div",{className:"text-justify text-2xl",children:r.content.split("\n").map((e,t,r)=>(0,n.jsxs)("span",{children:[e,t<r.length-1&&(0,n.jsx)("div",{className:"my-3"})]},t))}),(0,n.jsx)(h,{})]})]})}},6596:function(e,t,r){"use strict";r.d(t,{Gk:function(){return u},QD:function(){return i},T9:function(){return c},U0:function(){return l},Vn:function(){return s},X_:function(){return d},i6:function(){return f},wK:function(){return o}});var n=r(7665);let a=e=>{let{page:t,limit:r}=e;return(0,n.cn)({page:t,limit:r})},s=a({page:1,limit:10}),i=(0,n.cn)([]),l=(0,n.cn)(""),o=(0,n.cn)("all"),c=(0,n.cn)(""),u=a({page:1,limit:5}),d=(0,n.cn)({week:[],month:[],all:[]}),f=(0,n.cn)("")},2274:function(e,t,r){"use strict";r.d(t,{a:function(){return l}});var n=r(7437),a=r(7042),s=r(1396),i=r.n(s);function l(e){let{paths:t}=e;return(0,n.jsx)("nav",{"aria-label":"breadcrumb",className:"my-3 w-full rounded-md bg-neutral-100 px-5 py-3 shadow-lg dark:bg-neutral-700",children:(0,n.jsx)("ol",{className:"flex",children:t.map((e,r)=>{let s=r===t.length-1;return(0,n.jsxs)("li",{children:[(0,n.jsx)(i(),{href:e.href,className:(0,a.Z)("hover:text-blue-600 dark:text-blue-300 dark:hover:text-blue-500",{"text-blue-700 dark:text-primary":s}),children:e.title}),!s&&(0,n.jsx)("span",{className:"mx-2 text-neutral-500 dark:text-neutral-300",children:"/"})]},r)})})})}},6456:function(e,t,r){"use strict";r.d(t,{H1:function(){return s},H2:function(){return i}});var n=r(7437),a=r(7042);r(2265);let s=e=>{let{children:t,className:r}=e;return(0,n.jsx)("div",{className:(0,a.Z)("my-2 inline-block scroll-m-20 py-4 text-4xl font-extrabold tracking-tight lg:text-5xl",r),children:t})},i=e=>{let{children:t,className:r}=e;return(0,n.jsx)("div",{className:(0,a.Z)("my-2 inline-block scroll-m-20 py-1 text-2xl font-extrabold tracking-tight lg:text-3xl",r),children:t})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437),a=r(7256),s=r(9213),i=r(2265),l=r(2169);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...u}=e,d=c?a.g7:"button";return(0,n.jsx)(d,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...u})});c.displayName="Button"},8641:function(e,t,r){"use strict";r.d(t,{Bw:function(){return x},DI:function(){return d},Ph:function(){return u},Ql:function(){return g},i4:function(){return h},ki:function(){return f}});var n=r(7437),a=r(5163),s=r(3523),i=r(9224),l=r(2442),o=r(2265),c=r(2169);let u=a.fC,d=a.ZA,f=a.B4,h=o.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,n.jsxs)(a.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[i,(0,n.jsx)(a.JO,{asChild:!0,children:(0,n.jsx)(s.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=a.xz.displayName;let p=o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=a.u_.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...i,children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})});m.displayName=a.$G.displayName;let x=o.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...l}=e;return(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,n.jsx)(p,{}),(0,n.jsx)(a.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(m,{})]})})});x.displayName=a.VY.displayName,o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 font-semibold",r),...s})}).displayName=a.__.displayName;let g=o.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,n.jsxs)(a.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2  outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(a.eT,{children:s})]})});g.displayName=a.ck.displayName,o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=a.Z0.displayName},8937:function(e,t,r){"use strict";r.d(t,{cm:function(){return c},Sl:function(){return u},Iz:function(){return f},me:function(){return d},df:function(){return o},DG:function(){return l},IQ:function(){return h},RD:function(){return m},Um:function(){return x},Ql:function(){return p},lN:function(){return g}});var n=r(2333);async function a(e){return fetch(e).then(e=>e.json())}var s=r(304);let i="http://localhost:8000",l=()=>(0,n.ZP)("".concat(i,"/api/genres/"),a),o=(e,t)=>{let r=t?"".concat(i,"/api/genres/").concat(e,"/"):null;return(0,n.ZP)(r,a)},c=(e,t)=>{let r=t?"".concat(i,"/api/authors/").concat(e,"/"):null;return(0,n.ZP)(r,a)},u=e=>(0,n.ZP)("".concat(i,"/api/chapters/").concat(e,"/"),a),d=e=>{let{paginationAtom:t,storySlug:r}=e,{pagination:l}=(0,s.h0)(t);return(0,n.ZP)("".concat(i,"/api/stories/").concat(r,"/chapters/short-info/?limit=").concat(l.limit,"&page=").concat(l.page),a)},f=e=>(0,n.ZP)("".concat(i,"/api/stories/").concat(e,"/chapters/short-info/"),a),h=e=>(0,n.ZP)("".concat(i,"/api/stories/").concat(e,"/"),a),p=()=>(0,n.ZP)("".concat(i,"/api/top/stories/"),a),m=e=>{let{authorId:t,genreSlug:r,isHot:s,isNew:l,status:o,totalChaptersFrom:c,totalChaptersTo:u}=e,d="".concat(i,"/api/stories/?");return t&&(d+="author_id=".concat(t,"&")),r&&(d+="genre_slug=".concat(r,"&")),void 0!==s&&(d+="is_hot=".concat(s,"&")),void 0!==l&&(d+="is_new=".concat(l,"&")),o&&(d+="status=".concat(o,"&")),c&&(d+="total_chapters_from=".concat(c,"&")),u&&(d+="total_chapters_to=".concat(u,"&")),d=d.replace(/&$|\?$/,""),(0,n.ZP)(d,a)},x=e=>{let{paginationAtom:t,authorId:r,genreSlug:l,isHot:o,isNew:c,status:u,totalChaptersFrom:d,totalChaptersTo:f}=e,{pagination:h}=(0,s.h0)(t),p="".concat(i,"/api/stories/?limit=").concat(h.limit,"&page=").concat(h.page,"&");return r&&(p+="author_id=".concat(r,"&")),l&&(p+="genre_slug=".concat(l,"&")),void 0!==o&&(p+="is_hot=".concat(o,"&")),void 0!==c&&(p+="is_new=".concat(c,"&")),u&&(p+="status=".concat(u,"&")),d&&(p+="total_chapters_from=".concat(d,"&")),f&&(p+="total_chapters_to=".concat(f,"&")),p=p.replace(/&$|\?$/,""),(0,n.ZP)(p,a)},g=e=>{let t=(0,s.Nr)(e,300),r=""!==t.trim()?"".concat(i,"/api/search/?text=").concat(t):null;return(0,n.ZP)(r,a)}},304:function(e,t,r){"use strict";r.d(t,{Nr:function(){return o},Tp:function(){return l},h0:function(){return i}});var n=r(3890),a=r(2265),s=r(8937);let i=e=>{let[t,r]=(0,n.KO)(e);return{pagination:t,nextPage:()=>{r({...t,page:t.page+1})},prevPage:()=>{r({...t,page:Math.max(1,t.page-1)})},goToPage:e=>{r({...t,page:e})}}},l=(e,t)=>{let{data:r}=(0,s.df)(t,"genres"==e),{data:n}=(0,s.cm)(isNaN(parseInt(t,10))?1:parseInt(t,10),"authors"==e);switch(e){case"stories":switch(t){case"full":return{queryParams:{status:"completed"},paths:[{title:"Truyện Full",href:"/filter/stories/full"}]};case"hot":return{queryParams:{isHot:!0},paths:[{title:"Truyện Hot",href:"/filter/stories/hot"}]};case"updated":return{queryParams:{isNew:!0},paths:[{title:"Truyện Mới Cập Nhật",href:"/filter/stories/updated"}]};case"new":return{queryParams:{isNew:!0},paths:[{title:"Truyện Mới",href:"/filter/stories/new"}]};case"all":return{queryParams:{},paths:[{title:"Tất Cả Truyện",href:"/filter/stories/all"}]}}break;case"chapters":switch(t){case"lower-100":return{queryParams:{totalChaptersTo:100},paths:[{title:"Truyện Dưới 100 Chương",href:"/filter/chapters/lower-100"}]};case"from-100-to-500":return{queryParams:{totalChaptersFrom:100,totalChaptersTo:500},paths:[{title:"Truyện Từ 100 Đến 500 Chương",href:"/filter/chapters/from-100-to-500"}]};case"from-500-to-1000":return{queryParams:{totalChaptersFrom:500,totalChaptersTo:1e3},paths:[{title:"Truyện Từ 500 Đến 1000 Chương",href:"/filter/chapters/from-500-to-1000"}]};case"more-than-1000":return{queryParams:{totalChaptersFrom:1e3},paths:[{title:"Truyện Tr\xean 1000 Chương",href:"/filter/chapters/more-than-1000"}]};case"all":return{queryParams:{},paths:[{title:"Tất Cả Truyện",href:"/filter/stories/all"}]}}break;case"genres":if(r)return{queryParams:{genreSlug:t},paths:[{title:r.name,href:"/filter/genres/".concat(t)}]};break;case"authors":if(n)return{queryParams:{authorId:parseInt(t)},paths:[{title:n.name,href:"/filter/authors/".concat(t)}]}}return{queryParams:{},paths:[{title:"Tất Cả Truyện",href:"/filter/stories/all"}]}};function o(e,t){let[r,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let r=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(7042),a=r(4769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},4033:function(e,t,r){e.exports=r(5313)},9213:function(e,t,r){"use strict";r.d(t,{j:function(){return s}});let n=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,a=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n);else for(r in t)t[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(n&&(n+=" "),n+=t);return n},s=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let s=n(t)||n(a);return i[e][s]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return a(e,o,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[250,590,63,290,971,938,744],function(){return e(e.s=5932)}),_N_E=e.O()}]);